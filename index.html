<!doctype html>
<html>
	<head>
		<script src="https://d3js.org/d3.v4.js"></script>
	<script src="http://binaworks.github.io/scripts/d3-container.v0.0.1.min.js"></script>
		<style>
			.inner {
			  fill: #ccc;
			  stroke: #000;
			  stroke-dasharray: 3, 4;
			}
		</style>
	</head>
	<body>
		<script>
			d3.csv("data.csv", lineChart);

			function lineChart(data) {
				// ********** START... container setup
				// the container method comes from https://goo.gl/PScPbf
				const outerContainer = d3_container.container()
				    .margin(50)
				    .width(960)
				    .height(500);

				var margin = outerContainer.margin(),
				    innerWidth = outerContainer.contentWidth(),
				    innerHeight = outerContainer.contentHeight();

				var innerContainer = d3_container.container();

			 	var svg = d3.select("body").append("svg");

			 	svg.call(outerContainer);

				var content =  outerContainer.content();

				content.call(innerContainer);
				var g = innerContainer.content(),
				    width = innerContainer.contentWidth(),
				    height = innerContainer.contentHeight();

		    // Extents set the stage for the rest of the code we write
		    const xExtent = d3.extent(data, d => d.year);
		    const yExtent = d3.extent(data, d => d.poultry);

				 var x = d3.scaleLinear()
				     .domain(xExtent)
				     .range([0, width]);

				 var y = d3.scaleLinear()
				     .domain(yExtent)
				     .range([100, 0]);

				 var xAxis = d3.axisBottom(x);

				 var yAxis = d3.axisLeft(y);

				 g.append("g")
				     .attr("class", "x axis")
				     .attr("transform", "translate(0," + height + ")")
				     .call(xAxis);

				 g.append("g")
				     .attr("class", "y axis")
				     .call(yAxis);

			 	const poultryLine = d3.line()
			 		.x(d => x(d.year))
			 		.y(d => y(d.poultry));

			 	g.append("path")
			 		.attr("d", poultryLine(data))
			 		.attr("fill", "none")
			 		.attr("stroke", "#FE9A22")
			 		.attr("stroke-width", 2);
				// ********** END... container setup

				// ********** START... drawing lines

			}
		</script>
	</body>
</html>